(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{31:function(e,t,n){e.exports=n(59)},36:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(27),i=n.n(r),c=(n(36),n(8)),l=n(9),u=n(11),s=n(10),d=n(13),v=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).player=o.a.createRef(),a.state={video_url:a.props.src},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("video",{className:"video-js vjs-big-play-centered","data-setup":"{}",ref:this.player})}},{key:"componentDidUpdate",value:function(e,t){this.props.src!==e.src&&(this.setState({video_url:this.props.src}),console.log(this.video.sources))}},{key:"componentDidMount",value:function(){var e=this,t=this.player.current;this.video=window.videojs(t,{sources:[{src:this.state.video_url}],controls:!0,fluid:!0}),console.log(this.props);var n=this.props.eventON;n&&Object.keys(n).forEach((function(t){e.video.on(t,(function(){n[t]()}))}))}},{key:"componentWillUnmount",value:function(){this.video&&this.video.dispose()}}]),n}(a.Component),h=n(28),m=n.n(h),f=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).videoPlay=function(){a.ITManPlayer.video.play(),a.audioplayer.play()},a.videoPause=function(){a.ITManPlayer.video.pause(),a.audioplayer.pause()},a.videoSeek=function(){a.audioplayer.currentTime=a.ITManPlayer.video.currentTime()},a.volumechange=function(){a.audioplayer.volume=a.ITManPlayer.video.volume(),a.audioplayer.muted=a.ITManPlayer.video.muted()},a.state={video_url:"",audio_url:"",loaded:!1,fetchcount:0},a.fetchVideo=a.fetchVideo.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"fetchVideo",value:function(){var e=this;if(1!=this.state.loaded){var t="http://204.44.88.11/mitm/download/".concat(this.props.match.params.ix,"/");m.a.get(t).then((function(n){var a=document.createElement("div");a.innerHTML=n.data;for(var o=a.querySelectorAll("a"),r=0;r<o.length;r++){var i=o[r].innerHTML;i.includes("audio")?e.setState({audio_url:t+i}):e.setState({video_url:t+o[r].innerHTML,loaded:!0})}clearInterval(e.state.interrvalId),clearTimeout(e.state.timeoutId)})).catch((function(e){console.log(e)}))}}},{key:"componentDidMount",value:function(){var e=setInterval(this.fetchVideo,2e3);this.setState({interrvalId:e});var t=setTimeout((function(){alert("Source not found")}),3e4);this.setState({timeoutId:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.interrvalId)}},{key:"render",value:function(){var e=this;return""!==this.state.video_url&&""!==this.state.audio_url?o.a.createElement("div",{className:"wrap"},o.a.createElement(v,{ref:function(t){return e.ITManPlayer=t},src:this.state.video_url,eventON:{pause:function(){console.log("Pause"),e.videoPause()},play:function(){console.log("Play"),e.videoPlay()},seeked:function(){e.videoSeek(),console.log("Seeked")},volumechange:function(){e.volumechange(),console.log("volumechange")}}}),o.a.createElement("audio",{ref:function(t){return e.audioplayer=t},src:this.state.audio_url,type:"audo/mp4"})):o.a.createElement("div",null,o.a.createElement("h1",null,"Loading"))}}]),n}(a.Component),p=n(29),y=n(1),g=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return console.log("/mitm-frontend"),o.a.createElement(p.a,{basename:"/mitm-frontend"},o.a.createElement(y.c,null,o.a.createElement(y.a,{path:"/video/:ix",render:function(e){return o.a.createElement(f,Object.assign({key:e.match.params.ix},e))}})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.b124e0ba.chunk.js.map